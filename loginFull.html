<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="google-signin-client_id"
      content="877691268840-mfe9nuk08dt5br15sdga7ffb62thvqk9.apps.googleusercontent.com"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <link rel="icon" type="image/png" href="pics/paw.png" />
    <title>Login | petcare.uz</title>
    <!-- <link rel="stylesheet" href="login-css.css" /> -->
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap');

      :root {
        --primary-color: #685341;
        --text-dark: #502b0f;
        --extra-dark: #2e1402;
        --text-light: #724a24;
        --extra-light: #946d43;
        --white: #ecdbc1;
        --dirty-white: #ddb17e;
        --nav-foot-bg: #cbb799;
        --header-font: 'Nunito', serif;
      }

      * {
        padding: 0;
        margin: 0;
        box-sizing: border-box;
      }

      body {
        font-family: var(--header-font);
        background-image: url(pics/brick-5066288_1920.jpg);
        background-size: cover;
        backdrop-filter: blur(3px) brightness(70%);
        /* background-color: var(--primary-color); */
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        /* backdrop-filter: brightness(70%); */
      }

      .login__container {
        background-color: rgba(255, 255, 255, 0.39);
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 3rem 5rem rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 400px;
        text-align: center;
        backdrop-filter: blur(3px);
      }

      .login__container img {
        width: 200px;
      }

      .login__container h1 {
        font-size: 1.5rem;
        color: var(--text-dark);
        margin-bottom: 1.5rem;
      }

      #formTitle {
        font-family: var(--header-font);
      }

      .login__form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .login__form input {
        padding: 0.8rem;
        border: 1px solid var(--text-light);
        border-radius: 5px;
        font-size: 1rem;
        color: var(--text-dark);
        font-family: var(--header-font);
        background-color: #ffffff73;
      }

      .login__form button {
        padding: 0.8rem;
        background-color: var(--text-light);
        color: #fff;
        border: none;
        border-radius: 5px;
        font-size: 1rem;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .login__form button:hover {
        background-color: var(--extra-light);
      }

      .google__btn {
        background-color: #4285f4;
        margin-top: 1rem;
      }

      .google__btn:hover {
        background-color: #357abd;
      }

      .toggle__link {
        margin-top: 1rem;
        color: var(--text-dark);
        font-size: 1rem;
      }

      .toggle__link a {
        color: var(--extra-dark);
        text-decoration: none;
      }

      .toggle__link a:hover {
        text-decoration: underline;
      }

      .error {
        color: red;
        font-size: 0.9rem;
        margin-top: 0.5rem;
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="login__container">
      <img src="pics/Logo.png" alt="petcare.uz" />
      <h1 id="formTitle">Log In</h1>
      <form class="login__form" id="authForm">
        <input type="email" id="email" placeholder="Email" required />
        <input type="password" id="password" placeholder="Password" required />
        <button type="submit" id="submitBtn">Log In</button>
        <button type="button" class="google__btn" id="googleLogin">
          <i class="ri-google-fill"></i> Log In with Google
        </button>
      </form>
      <p class="error" id="errorMsg">Invalid email or password</p>
      <p class="toggle__link">
        <span id="toggleText">Don't have an account?</span>
        <a href="#" id="toggleLink">Sign Up</a>
      </p>
    </div>

    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <!-- <script src="login-script.js"></script> -->
    <script>
      //Oauth
      const authForm = document.getElementById('authForm');
      const submitBtn = document.getElementById('submitBtn');
      const formTitle = document.getElementById('formTitle');
      const toggleLink = document.getElementById('toggleLink');
      const toggleText = document.getElementById('toggleText');
      const errorMsg = document.getElementById('errorMsg');
      let isLogin = true;

      // Load users from localStorage (for demo purposes)
      let users = JSON.parse(localStorage.getItem('users')) || [];

      // Toggle between login and sign-up
      toggleLink.addEventListener('click', e => {
        e.preventDefault();
        isLogin = !isLogin;
        formTitle.textContent = isLogin ? 'Log In' : 'Sign Up';
        submitBtn.textContent = isLogin ? 'Log In' : 'Sign Up';
        toggleText.textContent = isLogin
          ? "Don't have an account?"
          : 'Already have an account?';
        toggleLink.textContent = isLogin ? 'Sign Up' : 'Log In';
        errorMsg.style.display = 'none';
      });

      // Handle form submission
      authForm.addEventListener('submit', e => {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        if (isLogin) {
          // Login logic
          const user = users.find(
            u => u.email === email && u.password === password
          );
          if (user) {
            localStorage.setItem('currentUser', JSON.stringify(user));
            window.location.href = 'index.html'; // Redirect to home page
          } else {
            errorMsg.style.display = 'block';
          }
        } else {
          // Sign-up logic
          if (users.some(u => u.email === email)) {
            errorMsg.textContent = 'Email already exists';
            errorMsg.style.display = 'block';
          } else {
            const newUser = {email, password};
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('currentUser', JSON.stringify(newUser));
            window.location.href = 'index.html'; // Redirect to home page
          }
        }
      });

      // Check if user is already logged in
      if (localStorage.getItem('currentUser')) {
        window.location.href = 'index.html';
      }
    </script>
  </body>
</html>
